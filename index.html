<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galería</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #fefaf5;
            color: #5c4033;
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
        }
        .header-container h1 {
            margin: 0;
        }
        .user-btn {
            margin: 10px;
            padding: 10px 20px;
            background-color: #f2d2cf;
            color: #5c4033;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .user-btn:hover {
            background-color: #e8bdb8;
        }
        .user-btn.selected {
            background-color: #e8bdb8;
            color: white;
        }
        .gallery-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .gallery-item {
            border: 2px solid #f2d2cf;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .gallery-item:hover {
            transform: scale(1.05);
        }
        .gallery-item img {
            width: 100%;
            height: auto;
            display: block;
        }
        .logout-button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #f2d2cf;
            color: #5c4033;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .logout-button:hover {
            background-color: #e8bdb8;
        }
        .form-container {
            display: none;
            margin-top: 20px;
            text-align: center;
        }
        .form-container input {
            margin: 10px;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .form-container button {
            padding: 10px 20px;
            background-color: #f2d2cf;
            color: #5c4033;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .form-container button:hover {
            background-color: #e8bdb8;
        }
        .action-buttons {
            margin-top: 20px;
        }
        .action-buttons button {
            margin: 10px;
        }
        .user-list {
            margin-top: 20px;
            text-align: center;
        }
        .user-list ul {
            list-style-type: none;
            padding: 0;
        }
        .user-list li {
            background-color: #f2d2cf;
            margin: 5px;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="header-container">
        <button class="user-btn" id="btnMaster" onclick="mostrarFormulario('master', this)">Usuario Master</button>
        <h1>AGENDA DIGITAL</h1>
        <button class="user-btn" id="btnNormal" onclick="mostrarFormulario('normal', this)">Usuario Normal</button>
    </div>

    <div id="action-buttons" class="action-buttons" style="display: none;">
        <button onclick="mostrarLogin()">Iniciar sesión</button>
        <button onclick="mostrarRegistro()">Registrarme</button>
    </div>

    <div class="form-container" id="form-container">
        <h2>Iniciar sesión / Registrarse</h2>
        <div id="form-register" style="display: none;">
            <input type="text" id="nombre" placeholder="Nombre completo" required>
            <input type="text" id="usuario-register" placeholder="Usuario" required>
            <input type="password" id="contrasena-register" placeholder="Contraseña" required>
            <button onclick="registrarse()">Registrarme</button>
        </div>
        <div id="form-login" style="display: none;">
            <input type="text" id="usuario-login" placeholder="Usuario" required>
            <input type="password" id="contrasena-login" placeholder="Contraseña" required>
            <button onclick="acceder()">Acceder</button>
        </div>
    </div>
    <div class="gallery-container">
        <a href="https://karlabucio.github.io/prueba/" class="gallery-item">
            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhX1UOIAN5OzYFu73-V08AviXEUU_K3KN4sQhq13hCz0Jt_X1fIcMLYAIemYykg75YCUG28IyxDNyd7V8MHu_LTLDq1Jq75Q23y1_5LiQfW6xwktr3OK1g5-mmwslU3_MlcEBMVpnr_etS4/s1600/tarea.png" alt="Eventos">
        </a>
        <div class="gallery-item">
            <a href="https://template.canva.com/EAGIZpuau2o/1/0/800w-wwxX3F9L99M.jpg" target="_blank">
                <img src="https://png.pngtree.com/png-vector/20240403/ourmid/pngtree-happy-new-year-2025-with-splash-vector-png-image_269979.png" alt="2025">
            </a>
        </div>
        <div class="gallery-item">
            <a href="https://cdn.pixabay.com/photo/2023/11/25/02/38/calendar-8410950_1280.png" target="_blank">
                <img src="https://media.istockphoto.com/id/1452686321/vector/2024-trend-logo-design-for-happy-new-year-poster-happy-new-year-2024-design-cover-of.jpg?s=612x612&w=0&k=20&c=Fkda3VcYKDnu7NX6miJ7fhC-Hg2gZ0ReWkdKu83cWbc=" alt="2024">
            </a>
        </div>
    </div>
    

    <button class="logout-button" onclick="cerrarSesion()">Cerrar sesión</button>

    <div class="user-list" id="user-list" style="display: none;">
        <h2>Usuarios Registrados</h2>
        <ul id="usersUl">
            
        </ul>
    </div>

    <script>
        let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
        let selectedUserType = null;
        let loggedInUser = null;

        function mostrarFormulario(tipo, button) {
            const masterBtn = document.getElementById("btnMaster");
            const normalBtn = document.getElementById("btnNormal");
            const actionButtons = document.getElementById("action-buttons");

            masterBtn.classList.remove("selected");
            normalBtn.classList.remove("selected");
            actionButtons.style.display = "none";

            if (tipo === "master") {
                masterBtn.classList.add("selected");
            } else if (tipo === "normal") {
                normalBtn.classList.add("selected");
            }

            selectedUserType = tipo;
            actionButtons.style.display = "block";
        }

        function mostrarLogin() {
            const formContainer = document.getElementById("form-container");
            formContainer.style.display = "block";
            document.getElementById("form-login").style.display = "block";
            document.getElementById("form-register").style.display = "none";
        }

        function mostrarRegistro() {
            const formContainer = document.getElementById("form-container");
            formContainer.style.display = "block";
            document.getElementById("form-register").style.display = "block";
            document.getElementById("form-login").style.display = "none";
        }

        function registrarse() {
            const nombre = document.getElementById("nombre").value;
            const usuario = document.getElementById("usuario-register").value;
            const contrasena = document.getElementById("contrasena-register").value;

            if (!nombre || !usuario || !contrasena) {
                alert("Por favor, complete todos los campos.");
                return;
            }

            const nuevoUsuario = {
                nombre: nombre,
                usuario: usuario,
                contrasena: contrasena,
                tipo: selectedUserType
            };

            usuarios.push(nuevoUsuario);
            localStorage.setItem("usuarios", JSON.stringify(usuarios));

            alert("Usuario registrado exitosamente!");

            document.getElementById("nombre").value = "";
            document.getElementById("usuario-register").value = "";
            document.getElementById("contrasena-register").value = "";

            document.getElementById("form-container").style.display = "none";
            mostrarUsuarios();
        }
        function acceder() {
            const usuarioLogin = document.getElementById("usuario-login").value;
            const contrasenaLogin = document.getElementById("contrasena-login").value;

            if (!usuarioLogin || !contrasenaLogin) {
                alert("Por favor, ingrese todos los campos.");
                return;
            }

            const usuarioEncontrado = usuarios.find(usuario => usuario.usuario === usuarioLogin && usuario.contrasena === contrasenaLogin);

            if (usuarioEncontrado) {
                loggedInUser = usuarioEncontrado;
                alert("¡Bienvenido " + usuarioEncontrado.nombre + "!");
                document.getElementById("form-container").style.display = "none";
                mostrarUsuarios();
            } else {
                alert("Usuario o contraseña incorrectos.");
            }
        }

        function mostrarUsuarios() {
            if (loggedInUser) {
                const userListContainer = document.getElementById("user-list");
                const usersUl = document.getElementById("usersUl");

                userListContainer.style.display = "block";
                usersUl.innerHTML = "";  // Limpiar lista de usuarios

                usuarios.forEach(usuario => {
                    const li = document.createElement("li");
                    li.textContent = `${usuario.nombre} (${usuario.usuario})`;

                    if (loggedInUser.tipo === "master" && usuario.tipo === "normal") {
                        const removeBtn = document.createElement("button");
                        removeBtn.textContent = "Eliminar";
                        removeBtn.onclick = function () {
                            eliminarUsuario(usuario.usuario);
                        };
                        li.appendChild(removeBtn);
                    }

                    usersUl.appendChild(li);
                });
            }
        }

        function eliminarUsuario(usuario) {
            if (loggedInUser.tipo !== "master") {
                alert("Solo el usuario master puede eliminar usuarios.");
                return;
            }

            usuarios = usuarios.filter(u => u.usuario !== usuario);
            localStorage.setItem("usuarios", JSON.stringify(usuarios));
            alert("Usuario eliminado exitosamente.");
            mostrarUsuarios();  // Actualizar la lista de usuarios
        }

        function cerrarSesion() {
            loggedInUser = null;
            alert("Has cerrado sesión.");
            document.getElementById("user-list").style.display = "none";
        }
    </script>
</body>
</html>
